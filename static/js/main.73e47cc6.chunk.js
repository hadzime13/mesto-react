(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{11:function(e,t,a){e.exports=a(17)},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(5),c=a.n(r),s=(a(16),a(10)),l=a(1),i=a(6),u=a.n(i);var p=function(){return o.a.createElement("header",{className:"header section section_standard"},o.a.createElement("img",{src:u.a,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u041c\u0435\u0441\u0442\u043e",className:"logo"}))},m=o.a.createContext(),d=a(7),h=a.n(d);var _=function(e){var t=e.onCardClick,a=e.cardElement,n=e.onCardLike,r=e.onCardDelete,c=o.a.useContext(m),s="photo-elements__delete-btn ".concat(c._id!==a.owner._id?"photo-elements__delete-btn_inactive":""),l=a.likes.some((function(e){return e._id===c._id})),i="photo-elements__like ".concat(l?"photo-elements__like_active":"");return o.a.createElement("li",{className:"photo-elements__list-item"},o.a.createElement("button",{type:"button",className:s,onClick:function(){r(a)}}),o.a.createElement("img",{className:"photo-elements__image",src:a.link,alt:a.name,onClick:function(){t(a)}}),o.a.createElement("h2",{className:"photo-elements__name"},a.name),o.a.createElement("div",{className:"photo-elements__like-wrapper"},o.a.createElement("button",{type:"button",className:i,onClick:function(){n(a)}}),o.a.createElement("span",{className:"photo-elements__like-span"},a.likes.length)))},f=o.a.memo((function(e){var t=e.cards,a=e.onEditProfile,n=e.onAddPlace,r=e.onEditAvatar,c=e.onMouseOnAvatar,s=e.onMouseOffAvatar,l=e.isAvatarButtonActive,i=e.onCardClick,u=e.onCardLike,p=e.onCardDelete,d=o.a.useContext(m);return o.a.createElement("main",{className:"content"},o.a.createElement("section",{className:"profile section section_standard"},o.a.createElement("div",{className:"profile__overlay"},o.a.createElement("div",{className:"profile__avatar",style:{backgroundImage:"url(".concat(d.avatar,")")},onMouseEnter:c,onMouseLeave:s,onClick:r},o.a.createElement("img",{src:h.a,alt:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",className:"profile__avatar-edit-btn ".concat(l&&"profile__avatar-edit-btn_active")}))),o.a.createElement("div",{className:"profile__info"},o.a.createElement("h1",{className:"profile__name"},d.name),o.a.createElement("button",{type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",className:"profile__edit-btn",onClick:a}),o.a.createElement("p",{className:"profile__job"},d.about)),o.a.createElement("button",{type:"button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",className:"profile__add-btn",onClick:n})),o.a.createElement("section",{className:"photo-elements section section_standard","aria-label":"\u041c\u0435\u0441\u0442\u0430"},o.a.createElement("ul",{className:"photo-elements__list"},t.map((function(e){return o.a.createElement(_,{key:e._id,cardElement:e,onCardClick:i,onCardLike:u,onCardDelete:p})})))))}));var E=function(){return o.a.createElement("footer",{className:"footer section section_standard"},o.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Mesto Russia"))};var v=function(e){var t=e.card,a=e.onClose;return o.a.createElement("section",{className:"popup popup_photo ".concat(t.link?"popup_opened":"")},o.a.createElement("div",{className:"popup__photo-container"},o.a.createElement("button",{type:"reset","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",className:"popup__close-btn",onClick:a}),o.a.createElement("img",{src:t.link,alt:t.name,className:"popup__image"}),o.a.createElement("h3",{className:"popup__photo-name"},t.name)))},b=o.a.memo((function(e){var t=e.isOpen,a=e.onClose,n=e.title,r=e.name,c=e.buttonText,s=e.children,l=e.onSubmit;return o.a.createElement("section",{className:"popup popup_".concat(r," ").concat(t?"popup_opened":"")},o.a.createElement("form",{action:"#",method:"POST",className:"popup__container",noValidate:!0,onSubmit:l},o.a.createElement("button",{type:"reset","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",className:"popup__close-btn",onClick:a}),o.a.createElement("h2",{className:"popup__name"},n),o.a.createElement("fieldset",{className:"popup__input-form"},s,o.a.createElement("button",{type:"submit",className:"popup__save-btn"},c))))})),k=o.a.memo((function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateUser,r=o.a.useContext(m),c=o.a.useState(""),s=Object(l.a)(c,2),i=s[0],u=s[1],p=o.a.useState(""),d=Object(l.a)(p,2),h=d[0],_=d[1];return o.a.useEffect((function(){u(r.name),_(r.about)}),[r,t]),o.a.createElement(b,{isOpen:t,onClose:a,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"profile",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onSubmit:function(e){e.preventDefault(),n({name:i,about:h})}},o.a.createElement(o.a.Fragment,null,o.a.createElement("input",{type:"text",placeholder:"\u0418\u043c\u044f",name:"input-name",id:"input-name",value:i||"",className:"popup__text popup__text_el_name",required:!0,minLength:"2",maxLength:"40",onChange:function(e){u(e.target.value)}}),o.a.createElement("span",{className:"popup__error",id:"input-name-error"}),o.a.createElement("input",{type:"text",placeholder:"\u041f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044f",name:"input-job",id:"input-job",value:h||"",className:"popup__text popup__text_el_job",required:!0,minLength:"2",maxLength:"200",onChange:function(e){_(e.target.value)}}),o.a.createElement("span",{className:"popup__error",id:"input-job-error"})))})),C=o.a.memo((function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateAvatar,r=o.a.useRef();return o.a.useEffect((function(){r.current.value=""}),[t]),o.a.createElement(b,{isOpen:t,onClose:a,title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"avatar",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onSubmit:function(e){e.preventDefault(),n(r.current.value)}},o.a.createElement(o.a.Fragment,null,o.a.createElement("input",{type:"url",ref:r,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",name:"input-avatarLink",id:"input-avatarLink",defaultValue:"",className:"popup__text popup__text_el_image-link",required:!0}),o.a.createElement("span",{className:"popup__error",id:"input-avatarLink-error"})))})),g=function(e){var t=e.isOpen,a=e.onClose,n=e.onAddPlace,r=o.a.useState(""),c=Object(l.a)(r,2),s=c[0],i=c[1],u=o.a.useState(""),p=Object(l.a)(u,2),m=p[0],d=p[1];return o.a.useEffect((function(){d(""),i("")}),[t]),o.a.createElement(b,{isOpen:t,onClose:a,title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"cards",buttonText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",onSubmit:function(e){e.preventDefault(),n({name:s,link:m})}},o.a.createElement(o.a.Fragment,null,o.a.createElement("input",{type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"input-place",id:"input-place",value:s,className:"popup__text popup__text_el_place",required:!0,minLength:"1",maxLength:"40",onChange:function(e){i(e.target.value)}}),o.a.createElement("span",{className:"popup__error",id:"input-place-error"}),o.a.createElement("input",{type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",name:"input-link",id:"input-link",value:m,className:"popup__text popup__text_el_image-link",required:!0,onChange:function(e){d(e.target.value)}}),o.a.createElement("span",{className:"popup__error",id:"input-link-error"})))},N=a(8),y=a(9),O=new(function(){function e(t){var a=t.url,n=t.headers;Object(N.a)(this,e),this._url=a,this._headers=n}return Object(y.a)(e,[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject(e.statusText)}},{key:"handleResponseError",value:function(e){return console.log("Error,".concat(e)),Promise.reject(e.message)}},{key:"getUser",value:function(){return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:this._headers}).then(this._handleResponse)}},{key:"updateUser",value:function(e){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._handleResponse)}},{key:"updateUserAvatar",value:function(e){return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._handleResponse)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"/cards"),{method:"GET",headers:this._headers}).then(this._handleResponse)}},{key:"uploadCard",value:function(e){var t=e.name,a=e.link;return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:a})}).then(this._handleResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._handleResponse)}},{key:"changeLikeStatus",value:function(e,t){return t?fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._handleResponse):fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._handleResponse)}}]),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-15",headers:{authorization:"37456d63-78f1-44ef-bbbe-976c826581c0","Content-Type":"application/json"}});var x=function(){var e=o.a.useState([]),t=Object(l.a)(e,2),a=t[0],n=t[1],r=o.a.useState(!1),c=Object(l.a)(r,2),i=c[0],u=c[1],d=o.a.useState(!1),h=Object(l.a)(d,2),_=h[0],b=h[1],N=o.a.useState(!1),y=Object(l.a)(N,2),x=y[0],j=y[1],S=o.a.useState(!1),A=Object(l.a)(S,2),L=A[0],R=A[1],P=o.a.useState({}),T=Object(l.a)(P,2),U=T[0],w=T[1],D=o.a.useState({}),M=Object(l.a)(D,2),q=M[0],J=M[1],B=function(){j(!1),u(!1),b(!1),w({})};return o.a.useEffect((function(){var e=[O.getUser(),O.getInitialCards()];Promise.all(e).then((function(e){var t=Object(l.a)(e,2),a=t[0],o=t[1];J(a),n(o)})).catch((function(e){O.handleResponseError(e)}))}),[]),o.a.createElement(m.Provider,{value:q},o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"page__container"},o.a.createElement(p,null),o.a.createElement(f,{cards:a,onEditProfile:function(){u(!0)},onAddPlace:function(){b(!0)},onEditAvatar:function(){j(!0)},onMouseOnAvatar:function(){R(!0)},onMouseOffAvatar:function(){R(!1)},isAvatarButtonActive:L,onCardClick:function(e){w(e)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===q._id}));O.changeLikeStatus(e._id,t).then((function(t){var o=a.map((function(a){return a._id===e._id?t:a}));n(o)})).catch((function(e){O.handleResponseError(e)}))},onCardDelete:function(e){O.deleteCard(e._id).then((function(){var t=a.filter((function(t){return t._id!==e._id}));n(t)})).catch((function(e){O.handleResponseError(e)}))}}),o.a.createElement(E,null)),o.a.createElement(k,{isOpen:i,onClose:B,onUpdateUser:function(e){O.updateUser(e).then((function(e){J(e),B()})).catch((function(e){O.handleResponseError(e)}))}}),o.a.createElement(g,{isOpen:_,onClose:B,onAddPlace:function(e){O.uploadCard(e).then((function(e){n([e].concat(Object(s.a)(a))),B()})).catch((function(e){O.handleResponseError(e)}))}}),o.a.createElement(C,{isOpen:x,onClose:B,onUpdateAvatar:function(e){O.updateUserAvatar(e).then((function(e){J(e),B()})).catch((function(e){O.handleResponseError(e)}))}}),o.a.createElement(v,{card:U,onClose:B})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t,a){e.exports=a.p+"static/media/logo.855a8c98.svg"},7:function(e,t,a){e.exports=a.p+"static/media/Vector.34c46850.svg"}},[[11,1,2]]]);
//# sourceMappingURL=main.73e47cc6.chunk.js.map